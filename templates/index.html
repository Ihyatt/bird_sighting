{% extends 'base.html' %}
{% block content %}



<div class="row">

	<div class="col-md-3  col-sm-3  col-xs-3 ">

	<div class="row">


		<h3>Please log in le bird sightings</h3>
		<label>le species</label>
	        <input type="text" class="form-control" placeholder="Robin..." id="bird_species">
	    <label>le quantity</label>
	        <input type="number" class="form-control" placeholder="2..." id="quantity">

	    <button type="button" id="add-sighting"class="btn btn-default"> add le sighting </button>

	</div>

	<div class="row">	
	<h3>When to find le bird</h3>

	      <div class="input-group">
	         <span class="input-group-addon glyphicon glyphicon-search search-sighting"  id="basic-addon1"></span>
	         <input type="text" id="search" class="form-control" placeholder="Chickadee..." aria-describedby="basic-addon1">
	      </div>
	      
	<ul id="bird-sighting">
	</ul>
	</div>

	<div class="row">
		<button type="button" id="view-probabilities"class="btn btn-default"> view le birds and probability </button>
		<ul id="all-birds">
	</ul>

	</div>

	</div>
</div>



<script>
// JS for return Search
function showChanceSighting(results) {
	var returnedBird = results;
	$("#bird-sighting").append("Here are the times you should check out Le Bird!")

	for (var key in returnedBird){

	$("#bird-sighting").append("<li>" + returnedBird[key] + key + "</li>")
 };

	$("#search").val("")
}
function getProbability() {
	var searchBird = $("#search").val();
	console.log(searchBird)
	var search_bird = {
		"bird": searchBird
	};
	$.get("/return-search.json", search_bird, showChanceSighting);
	$("#bird-sighting").html("")
}

$(".search-sighting").click(getProbability)

// JS for submitting bird sightings
function sightingSubmitted() {
	console.log("Success")
}
function submitSighting() {
	var submitBird = $("#bird_species").val();
	var submitQuantity = $("#quantity").val();
	var submission = {
		"bird": submitBird,
		"quantity": submitQuantity
	};
	$.post("/submit-bird", submission, sightingSubmitted);
	$("#bird_species").val("")
	$("#quantity").val("")
}
$("#add-sighting").click(submitSighting)




// JS for wanting to see all birds and probability 

function showAllBirds(results){
	var returnedAllBirds = results;

	for (var key in returnedAllBirds){
	$("#all-birds").append("<li>" + key + " " + returnedAllBirds[key] + "%" +  "</li>")
 };


}

function viewAllBirds() {
	$.get("/return-all-birds.json", showAllBirds);
	$("#view-probabilities").html("refresh le probabilities");
	$("#all-birds").html("")
}


$("#view-probabilities").click(viewAllBirds)
</script>

{% endblock %}